---
title: "running fishmap"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{running-fishmap}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(FishMap)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_main.Rmd: do not edit by hand -->

```{r message = FALSE}
library(dplyr)
library(INLA)
library(ggplot2)
library(sf)
library(stringr)
library(tidyr)
library(TMB)
library(tictoc)
library(testthat)
```

# `main.R`

This vignette runs a toy example of the FishMap spatio-temporal model. The execution comprises three steps : data preparation, model fitting and graph generation.


## part1: Data preparation

### `fm_load_data()` : prepare and load model inputs

This function Prepare all the necessary output for the model fitting. It will filter and shape the observation data (VMS and scientific). It will generate the spatial mesh for the study domain. All outputs are reported as part of a named list.
    

  

```{r preex-fm_load_data}
# run part1
fm_data_inputs <- fm_load_data()

```

  

## part2: fit model

### `fm_fit_model()`: compile model and fit to data

This function will fit the model to the observation data. It will compile the model cpp file. It will fit the model to the input data generated from `fm_load_data()` and provide the results as a named list.

    

  

```{r preex-fm_fit_model}
# run part 2
fm_model_results <- fm_fit_model(fm_data_inputs)
```

  

## part3: generate output graphs

### `fm_generate_graphs()` : generate output graphs

This function will generate graphs of the model predictions. It will use as input the data generated from `fm_fit_model()` and provide the predictive plot within a named list. Is the sampling process is activated (`samp_process = 1`), an additionnal graphic for eta result will be generated.


  

```{r preex-fm_generate_graphs}
# run part 3
fm_generate_graphs(fm_model_results)
```

  

  


